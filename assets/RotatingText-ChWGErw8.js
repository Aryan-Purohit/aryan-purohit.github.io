import{r as t,j as C}from"./index-C349eTwI.js";import{M as V,i as X,u as K,P as _,a as q,b as J,L as Q,m as B}from"./proxy-Bv0l6m2p.js";class Y extends t.Component{getSnapshotBeforeUpdate(d){const e=this.props.childRef.current;if(e&&d.isPresent&&!this.props.isPresent){const u=e.offsetParent,I=X(u)&&u.offsetWidth||0,i=this.props.sizeRef.current;i.height=e.offsetHeight||0,i.width=e.offsetWidth||0,i.top=e.offsetTop,i.left=e.offsetLeft,i.right=I-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Z({children:l,isPresent:d,anchorX:e,root:u}){const I=t.useId(),i=t.useRef(null),w=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:j}=t.useContext(V);return t.useInsertionEffect(()=>{const{width:E,height:c,top:y,left:r,right:f}=w.current;if(d||!i.current||!E||!c)return;const g=e==="left"?`left: ${r}`:`right: ${f}`;i.current.dataset.motionPopId=I;const a=document.createElement("style");j&&(a.nonce=j);const m=u??document.head;return m.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${I}"] {
            position: absolute !important;
            width: ${E}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${y}px !important;
          }
        `),()=>{m.contains(a)&&m.removeChild(a)}},[d]),C.jsx(Y,{isPresent:d,childRef:i,sizeRef:w,children:t.cloneElement(l,{ref:i})})}const O=({children:l,initial:d,isPresent:e,onExitComplete:u,custom:I,presenceAffectsLayout:i,mode:w,anchorX:j,root:E})=>{const c=K(ee),y=t.useId();let r=!0,f=t.useMemo(()=>(r=!1,{id:y,initial:d,isPresent:e,custom:I,onExitComplete:g=>{c.set(g,!0);for(const a of c.values())if(!a)return;u&&u()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[e,c,u]);return i&&r&&(f={...f}),t.useMemo(()=>{c.forEach((g,a)=>c.set(a,!1))},[e]),t.useEffect(()=>{!e&&!c.size&&u&&u()},[e]),w==="popLayout"&&(l=C.jsx(Z,{isPresent:e,anchorX:j,root:E,children:l})),C.jsx(_.Provider,{value:f,children:l})};function ee(){return new Map}const T=l=>l.key||"";function F(l){const d=[];return t.Children.forEach(l,e=>{t.isValidElement(e)&&d.push(e)}),d}const te=({children:l,custom:d,initial:e=!0,onExitComplete:u,presenceAffectsLayout:I=!0,mode:i="sync",propagate:w=!1,anchorX:j="left",root:E})=>{const[c,y]=q(w),r=t.useMemo(()=>F(l),[l]),f=w&&!c?[]:r.map(T),g=t.useRef(!0),a=t.useRef(r),m=K(()=>new Map),[$,z]=t.useState(r),[R,b]=t.useState(r);J(()=>{g.current=!1,a.current=r;for(let v=0;v<R.length;v++){const h=T(R[v]);f.includes(h)?m.delete(h):m.get(h)!==!0&&m.set(h,!1)}},[R,f.length,f.join("-")]);const s=[];if(r!==$){let v=[...r];for(let h=0;h<R.length;h++){const P=R[h],M=T(P);f.includes(M)||(v.splice(h,0,P),s.push(P))}return i==="wait"&&s.length&&(v=s),b(F(v)),z(r),null}const{forceRender:D}=t.useContext(Q);return C.jsx(C.Fragment,{children:R.map(v=>{const h=T(v),P=w&&!c?!1:r===R||f.includes(h),M=()=>{if(m.has(h))m.set(h,!0);else return;let S=!0;m.forEach(k=>{k||(S=!1)}),S&&(D?.(),b(a.current),w&&y?.(),u&&u())};return C.jsx(O,{isPresent:P,initial:!g.current||e?void 0:!1,custom:d,presenceAffectsLayout:I,mode:i,root:E,onExitComplete:P?void 0:M,anchorX:j,children:v},h)})})};function L(...l){return l.filter(Boolean).join(" ")}const ne=t.forwardRef((l,d)=>{const{texts:e,transition:u={type:"spring",damping:25,stiffness:300},initial:I={y:"100%",opacity:0},animate:i={y:0,opacity:1},exit:w={y:"-120%",opacity:0},animatePresenceMode:j="wait",animatePresenceInitial:E=!1,rotationInterval:c=2e3,staggerDuration:y=0,staggerFrom:r="first",loop:f=!0,auto:g=!0,splitBy:a="characters",onNext:m,mainClassName:$,splitLevelClassName:z,elementLevelClassName:R,...b}=l,[s,D]=t.useState(0),v=n=>{if(typeof Intl<"u"&&Intl.Segmenter){const o=new Intl.Segmenter("en",{granularity:"grapheme"});return Array.from(o.segment(n),p=>p.segment)}return Array.from(n)},h=t.useMemo(()=>{const n=e[s];if(a==="characters"){const o=n.split(" ");return o.map((p,x)=>({characters:v(p),needsSpace:x!==o.length-1}))}return a==="words"?n.split(" ").map((o,p,x)=>({characters:[o],needsSpace:p!==x.length-1})):a==="lines"?n.split(`
`).map((o,p,x)=>({characters:[o],needsSpace:p!==x.length-1})):n.split(a).map((o,p,x)=>({characters:[o],needsSpace:p!==x.length-1}))},[e,s,a]),P=t.useCallback((n,o)=>{const p=o;if(r==="first")return n*y;if(r==="last")return(p-1-n)*y;if(r==="center"){const x=Math.floor(p/2);return Math.abs(x-n)*y}if(r==="random"){const x=Math.floor(Math.random()*p);return Math.abs(x-n)*y}return Math.abs(r-n)*y},[r,y]),M=t.useCallback(n=>{D(n),m&&m(n)},[m]),S=t.useCallback(()=>{const n=s===e.length-1?f?0:s:s+1;n!==s&&M(n)},[s,e.length,f,M]),k=t.useCallback(()=>{const n=s===0?f?e.length-1:s:s-1;n!==s&&M(n)},[s,e.length,f,M]),H=t.useCallback(n=>{const o=Math.max(0,Math.min(n,e.length-1));o!==s&&M(o)},[e.length,s,M]),W=t.useCallback(()=>{s!==0&&M(0)},[s,M]);return t.useImperativeHandle(d,()=>({next:S,previous:k,jumpTo:H,reset:W}),[S,k,H,W]),t.useEffect(()=>{if(!g)return;const n=setInterval(S,c);return()=>clearInterval(n)},[S,c,g]),C.jsxs(B.span,{className:L("flex flex-wrap whitespace-pre-wrap relative",$),...b,layout:!0,transition:u,children:[C.jsx("span",{className:"sr-only",children:e[s]}),C.jsx(te,{mode:j,initial:E,children:C.jsx(B.span,{className:L(a==="lines"?"flex flex-col w-full":"flex flex-wrap whitespace-pre-wrap relative"),layout:!0,"aria-hidden":"true",children:h.map((n,o,p)=>{const x=p.slice(0,o).reduce((A,N)=>A+N.characters.length,0);return C.jsxs("span",{className:L("inline-flex",z),children:[n.characters.map((A,N)=>C.jsx(B.span,{initial:I,animate:i,exit:w,transition:{...u,delay:P(x+N,p.reduce((U,G)=>U+G.characters.length,0))},className:L("inline-block",R),children:A},N)),n.needsSpace&&C.jsx("span",{className:"whitespace-pre",children:" "})]},o)})},s)})]})});ne.displayName="RotatingText";export{ne as default};
